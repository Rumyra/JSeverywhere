<!DOCTYPE html>
<html lang="en">
<head>
  <!--char set (lang above)-->
  <meta charset="utf-8">

  <!--device/browser shizzle-->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!--meta content-->
  <link rel="shortcut icon" href="favicon.ico" />
  
  <meta name="author" content="Ruth John (@rumyra)">
  <meta name="dcterms.rightsHolder" content="Ruth John for Rumyra Ltd, United Kingdom, 2015">
  <title>Javascript is Everywhere</title>

  <!--CHANGE THIS TO USE NPM-->
  <link rel="stylesheet" href="reveal/css/reveal.css">
  <link rel="stylesheet" href="reveal/css/theme/sky.css" id="theme">
  <link rel="stylesheet" href="reveal/lib/css/zenburn.css" id="theme">
  <script src="reveal/js/reveal.js"></script>

  <!-- <link href="public/css/extraTalk.css" rel="stylesheet" type="text/css"> -->
  <script src="https://js.pusher.com/3.0/pusher.min.js"></script>

  <style type="text/css">
  #apiList p {display: inline-block; margin:20px;}
  </style>
  
</head>
<body class="talk">
  <div class="reveal">
    <div class="slides">
      <section>
        <section>
          <h1>Out Of The Browser</h1>
          <h2>And Onto The Streets</h2>
          <h3>Ruth John</h3>
        </section>
        <section>
          <h2>Hello, my name is Ruth</h2>
          <h3 class="fragment fade-in">@rumyra</h3>
          <aside class="notes">
            <p>Hi my names Ruth - I’m from the UK. I’m from a web development background, I currently work in research and development. You can find me on the internets as @rumyra</p>
            <p></p>
          </aside>
        </section>
        <section>
          <h2>Javascript</h2>
          <aside class="notes">
            <p>Javascript</p>
          </aside>
        </section>
        <section data-background="public/ohyes.gif">
          <aside class="notes">
            <p>It's awesome right?</p>
            <p>I mean just today we've seen...</p>
          </aside>
        </section>
        <section>
          <h3>Awesome Transitions</h3>
          <h3 class="fragment fade-in">Funky functions</h3>
          <h3 class="fragment fade-in">Hidden treasures</h3>
          <h3 class="fragment fade-in">JS on mobile</h3>
          <aside class="notes">
            <p>Awesome CSS transitions - btw I recommend animation API, funky functions - nothing wrong with a bit of functional programming. Bluetooth - luv luv luv. And of course, JS in your pocket right - on your pocket computer - your mobile phone!</p>
          </aside>
        </section>
        <section>
          <h2>Quick run down?</h2>
          <aside class="notes">
            <p>What can I say - shall we do a quick run down?</p>
            <p class="fragment fade-in">Created in 10 days in May 1995 by Brendan Eich</p>
            <p class="fragment fade-in">Stuff happened</p>
          </aside>
        </section>

        

        <p>One of my very good friends - the wonderful Andrew Nesbitt aka @teabass once said if something can be built, it will be built with JavaScript.</p>
        
        <section data-background="public/alllogos.png">
          <aside class="notes">
            <p>And now we're here</p>
            <p>Seriously tho - it's been a hard journey for JS, what with the browser vendors and the actionscript and the ECMA v4, 3.1 5 and now 2015, 2016.</p>
            <p>Javascript has suddenly grown up and it's got serious!</p>
          </aside>
        </section>

        <section data-background="public/serious.gif">
          <aside class="notes">
            <p>Serious programming</p>
            <p>But this is the wonderful thing about this loosely type dark art that is JavaScript. It can be serious, but it can also be a lot of fun. There are so many amazing things we now have to play with</p>
            <p>We know this because of all the places we see javascript now - the serious places like</p>
          </aside>
        </section>

        <section data-background="public/aircraft.png">
          <aside class="notes">
            <p>Node servers on an aircraft - this is Reaktor - a company serving in flight experiences via an onboard node server for Finair</p>
          </aside>
        </section>

        <section data-background="public/ebola.png">
          <aside class="notes">
            <p>The new offline capabilities of javascript meant it help fight ebola - this is a talk at the last JSConfEU last year. Really important clever stuff.</p>
          </aside>
        </section>

        <section data-background="public/ebola.png">
          <aside class="notes">
            <p>And of course, if we believe the telly - which we all do - javascript is used for serious hacking - as portayed in this usa programme 'white collar'.</p>
            <p>And then there's the fun stuff...</p>
          </aside>
        </section>

        <section data-background="public/novation.png">
          <aside class="notes">
            <p>All</p>
          </aside>
        </section>

        <section data-background="public/roland808.png">
          <aside class="notes">
            <p>of</p>
          </aside>
        </section>

        <section data-background="public/viktor.png">
          <aside class="notes">
            <p>the</p>
          </aside>
        </section>

        <section data-background="public/html909.png">
          <aside class="notes">
            <p>synths</p>
          </aside>
        </section>

        <section data-background="public/mod.png">
          <aside class="notes">
            <p>They're all linked to at the end of these slides and I'll flurry link them after too - they're amazing - true engineering.</p>
          </aside>
        </section>

        <section data-background="public/lunar.png">
          <aside class="notes">
            <p>Art installations - like sebly's lunar trails. Hardware meets browser at it's best. An old arcade game recreated in the browser - which is not only a hardware installation but also you can play it in the browser on the website.</p>
          </aside>
        </section>

        <section data-background="public/lunar.png">
          <aside class="notes">
            <p>And I haven't even begun on hardware. Tessles, esprinos, node running on raspberry pies, noecoptors - we saw BLE beacons earlier. Javascript is literally everywhere.</p>
          </aside>
        </section>

        <section>
          <img class="plain" src="public/ponies.png" />
          <aside class="notes">
            <p>And it's not just this library, this framework, this node module... this browser thing we have - this has been rocking it the past few years as well! Even IE has upped it's game with Edge. Who'd a thunk.</p>
            <p>I mean we got...</p>
          </aside>
        </section>

        <section>
          <h2>Browser APIs</h2>
          <div id="apiList" class="fragment fade-in">
            <p>Geolocation</p>
            <p>Web Animation</p>
            <p>Web Audio</p>
            <p>Ambient Light</p>
            <p>Media Stream</p>
            <p>Media Recorder</p>
            <p>Streams</p>
            <p>Device Orientation</p>
            <p>Screen Orientation</p>
            <p>Web MIDI</p>
            <p>Proximity</p>
            <p>Battery Status</p>
            <p>Push Notifications</p>
            <p>Network Information</p>
            <p>File System</p>
            <p>Clipboard</p>
            <p>Full Screen</p>
            <p>Page Visibility</p>
            <p>Web Speech</p>
            <p>Gamepad</p>
            <p>Pointer Lock</p>
            <p>Alarm</p>
            <p>Vibration</p>
            <p>Bluetooth</p>
            <p>NFC</p>
          </div>
        </section>

        <section data-background="public/ohyes.gif">
          <aside class="notes">
            <p>Javascript</p>
            <p>So anyways - a couple of years a go this all got me thinking - what can we now do with this browser thing - I mean a lot right and I started remenising. You see I'm quite old - I went to uni a long time a go and I remember this:</p>
          </aside>
        </section>

        <section>
          <h2>Winamp</h2>
          <img src="/public/WinAmp.gif" style="display:block;margin:0px auto;" />
          <audio controls  style="display:block;margin:0px auto;">
            <source src="/public/llama.mp3" type="audio/mp3" />
          </audio>
          <aside class="notes">
            Winamp was the mp3 player of choice
            We're talking back when Napster was illegal
            My favourtie thing - Visualizer
          </aside>
        </section>

        <section>
          <img src="/media/winampViz.jpg" style="display:block;margin:0px auto;" />
          <aside class="notes">
            <p>Winamp visualise inspired me - I used to go into clubs & venues with projector.</p>
            <p>So I got to thinking - could I recreate my native VJ software in a browser</p>
          </aside>
        </section>

        <section>
          <h2>Requirements</h2>
          <p class="fragment roll-in">Moving visual: Web Animation API, HTML, CSS, Canvas, Web GL, video element...</p>
          <p class="fragment roll-in">Analysed sound wave: Web Audio API</p>
          <p class="fragment roll-in">Controller: Web MIDI API</p>
          <aside class="notes">
            <p>Requirements would be moving visual. We've got HTML, CSS, Canvas, WebGL - all these lovely things</p>
            <p>A way to analyse the sound to move the visual - well we have the web audio API</p>
            <p>And a way to control/mix these visuals - the web MIDI API</p>
          </aside>
        </section>

        <section>
            <style>

            @-webkit-keyframes flashing {
              0%   { opacity: 0; }
              50%   { opacity: 1; }
              100% { opacity: 0; }
            }

            .lights {
              position:relative;
              width:100%; height:500px;
              background-color:black;
            }
            .lights i {
              display:block;
              position:absolute; top:48%; left:48%;
              width:30px; height:30px;
              background-color:hsla(200, 80%, 50%, 0.8);
              border:10px solid hsla(200, 80%, 50%, 1);
              border-radius:2px;
              /*call animation*/
              -webkit-animation:flashing 2s infinite;
            }
            </style>
            <div class="lights">
              <i id="onelight"></i>
            </div>
            <aside class="notes">
              
            </aside>
          </section>

        <section>
          <h2>Creating Animation CHANGE</h2>
          <pre><code data-trim contenteditable>
@keyframes flashing {
  0%   { opacity: 0; }
  50%   { opacity: 1; }
  100% { opacity: 0; }
}

.lights i {
  animation:flashing 2s infinite;
}
          </code></pre>
          <h3>You'll need vendor prefixes :)</h3>
          <p>List of animatable properties:<br /> <a href="http://oli.jp/2010/css-animatable-properties/">http://oli.jp/2010/css-animatable-properties/</a></p>
          <aside class="notes">
            Declare animation using @keyframe directive
            Keyframes - pecentages or beg & end with 'from' 'to'
            Call animation under style for element
            Vendor prefixes
            Lots of animatable properties - fonts, borders, backgrounds, prositioning
            List
            You can go mad with CSS animation today ->
          </aside>
        </section>

        <!--<section>
          <h2>Browser Support</h2>
          <img src="/media/companimation.jpg" />
        </section>-->

        <section>
          <style>
          .lights i:nth-child(1) {top:200px; left:100px;}
          .lights i:nth-child(2) {top:200px; left:200px;}
          .lights i:nth-child(3) {top:200px; left:300px;}
          .lights i:nth-child(4) {top:200px; left:400px;}
          .lights i:nth-child(5) {top:200px; left:500px;}
          .lights i:nth-child(6) {top:200px; left:600px;}
          .lights i:nth-child(7) {top:200px; left:700px;}
          .lights i:nth-child(8) {top:200px; left:800px;}

          .lights i:nth-child(9) {top:300px; left:100px;}
          .lights i:nth-child(10) {top:300px; left:200px;}
          .lights i:nth-child(11) {top:300px; left:300px;}
          .lights i:nth-child(12) {top:300px; left:400px;}
          .lights i:nth-child(13) {top:300px; left:500px;}
          .lights i:nth-child(14) {top:300px; left:600px;}
          .lights i:nth-child(15) {top:300px; left:700px;}
          .lights i:nth-child(16) {top:300px; left:800px;}
          </style>
          <h2>More lights...</h2>
          <div class="lights">
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>

            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
            <i></i>
          </div>
          <aside class="notes">
            OK cool so we have animated visuals
          </aside>
        </section>

        <section>
          <h2>Web Audio API</h2>
          <aside class="notes">
            Input node - sound in - usually file
            Output node - sound out - usually speakers
          </aside>
        </section>

        <section>
          <h2>All about nodes</h2>
          <p>Input node - sound in</p>
          <p>Modification and anlyser nodes</p>
          <p>Output node - sound out (usually speakers)</p>
          <aside class="notes">
            <p>I'm sure we've all seen the API - but just to go over it - the concept is based around nodes all linked together, input output etc...</p>
          </aside>
        </section>

        <section>
          <!-- cut out code -->
          <p>Control volume</p>
          <pre><code data-trim contenteditable>
//Control volume
myAudioContext.createGain();
          </code></pre>

          <p class="fragment roll-in">Create filters</p>
          <pre class="fragment roll-in"><code data-trim contenteditable>
//Create filter
myAudioContext.createBiquadFilter();
          </code></pre>

          <p class="fragment roll-in">Create sound</p>
          <pre class="fragment roll-in"><code data-trim contenteditable>
//Create sound
myAudioContext.createOscillator();
          </code></pre>
          <aside class="notes">
            <p>You can do simple things like control volume - or more comples like make sound filters or even make sound itself (you can aso load sound in)</p>
          </aside>
        </section>

        <section>
          <h2>Analysing</h2>
          <p class="fragment roll-in">We can do that :D</p>
          <pre class="fragment roll-in"><code data-trim contenteditable>
//create instance
var analyser = myAudioContext.createAnalyser();

//get data
analyser.getByteFrequencyData();
analyser.getFloatFrequencyData();
analyser.getByteTimeDomainData();
          </code></pre>
          <aside class="notes">
            <p>I however want to analyse sound. So I create an analyser node - here you have access to both time and frequncy data - I want frequency.</p>
          </aside>
        </section>

        <section>
          <h2>Match frequency to a light</h2>
          <pre>
//get light elements
var lights = document.getElementsByTagName('i');
var totalLights = lights.length;

for (var i=0; i<totalLights; i){
  var freqDataKey = i*8;
  if (frequencyData[freqDataKey] > 160){
    lights[i].style.opacity = "1";
  } else {
    lights[i].style.opacity = "0.2";
  }
}
          </pre>
          <aside class="notes">
            <p>Here I just loop over the light elements and match frequency to a light - so when that frequency plays the light shines</p>
            <p>But we need some sound - probably sound the DJ/band is playing</p>
          </aside>
        </section>
        
        <section>
          <h2>Enter Another Web API</h2>
          <p class="fragment roll-in">getUserMedia</p>
          <p class="fragment roll-in">Picks up on devices camera and microphone</p>
        </section>

        <section>
          <h2>Demo</h2>
          <p class="fragment roll-in">getUserMedia</p>
          <p class="fragment roll-in">Picks up on devices camera and microphone</p>
        </section>

        <section>
          <h2>VJ needs to mix</h2>
        </section>

        // a little bit about MIDI instruments and controllers

        // this is my midi controller

        one side controls one div - one side the other and I use the cross fader in the middle to mix between them.
        
        
        <section>
          <h2>References</h2>
          <p><a href="https://backstage.spotlight.com/2015/01/08/javascript-tools-frameworks-and-libraries/">Javascript logo image</a></p>
          <p><a href="https://reaktor.com/blog/aircraft-customer-experience-on-a-new-level/">Reaktor</a></p>
          <p><a href="http://2015.jsconf.eu/speakers/patricia-garcia-good-tech-for-hard-places-fighting-ebola-with-javascript-offline-apps.html">Fighting Ebola with offline apps</a></p>
          <p><a href="https://twitter.com/adamdawkins/status/670588991784230912">White Collar USA</a></p>
          <p><a href="http://intro.novationmusic.com/harry-coade">Launchpad</a></p>
          <p><a href="http://codepen.io/pixelass/full/adyLPR/">Roland 808</a></p>
          <p><a href="https://nicroto.github.io/viktor/">Viktor NV-1</a></p>
          <p><a href="http://html909.com/#/">HTML909</a></p>
          <p><a href="http://mod-synth.io/">Mod Synth</a></p>
          <p><a href="https://www.midi.org/">Javascript logo image</a></p>
          <p><a href="https://www.midi.org/">Javascript logo image</a></p>
          <p><a href="https://www.midi.org/">Javascript logo image</a></p>
          
        </section>
        
        <section>
          <h2>Core of MIDI: Messages</h2>

          <p class="fragment fade-in">General MIDI: Channel Messages & System Messages</p>

          <p class="fragment fade-in">Channel messages: Voice messages & Mode messages</p>
          <p class="fragment fade-in">Detail? Let me show you.</p>
          <aside class="notes">
            <p>Core of MIDI is messages - data messages, this digital protocal. The GM spec comes can be grouped into two distinct parts. Channels and system level.</p>
            <p>There are two types of channel messages - voice and mode. Voice messages are sent over voice channels and mode messages are sent over an instruments basic channel.</p>
            <p>The channels part of the general MIDI spec describes what you’ve just seen - it’s about note on, note off, velocity (how hard you press), and which frequency is playing, which note, C, D, E etc…</p>
          </aside>
        </section>

        <section>
          <h2>You will need</h2>
          <ol>
            <li>A device (Phone)</li>
            <li>A modern browser</li>
            <li><a href="http://tiny.cc/jsconfuy">tiny.cc/jsconfuy</a></li>
          </ol>
          <aside class="notes">
            <p>The easiest way for me to explain this to you is for me to illustrate this to you. Let’s take probably one of the most common MIDI enabled instruments - a keyboard.</p>
          </aside>
        </section>

        <section>
          <h2>Demo</h2>
          <p><a href="http://tiny.cc/jsconfuy">tiny.cc/jsconfuy</a></p>
          <p data-height="524" data-theme-id="1345" data-slug-hash="jWdWdp" data-default-tab="result" data-user="Rumyra" data-embed-version="2" class="codepen">See the Pen <a href="http://codepen.io/Rumyra/pen/jWdWdp/">Music keyboard</a> by Rumyra (<a href="http://codepen.io/Rumyra">@Rumyra</a>) on <a href="http://codepen.io">CodePen</a>.</p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>
          <aside class="notes">
            <p>You should all see a keyboard - one of the most common MIDI enabled instruments. Now this is the data that the web MIDI api passes back to us when a MIDI device is plugged in. So let's take a look at the code.</p>
          </aside>
        </section>

        <section>
          <h2>[144, 60, 100]</h2>
          <p class="fragment fade-in">[Message type (Note on) & Channel, Note, Velocity/Pressure]</p>
          <h2 class="fragment fade-in">[128, 60, 64]</h2>
          <p class="fragment fade-in">[Message type (Note off), Note, Velocity/pressure]</p>
          <aside class="notes">
            <p>the first byte 144 is the message type and channel, 144 is 90 in hex and the 9 says it's a 'Note on' message and the 0 is the channel number. A 'Note on' message has two data bytes, the first is the 'key number' which I'm guessing is the note number, so 60 would be C the second is 'note on velocity' and this has a value of 100, - 0-127 (I'm guessing this means the rate at which the note is turned on)</p>

          </aside>
        </section>

        <section>
          <h2>Web MIDI API</h2>
          <pre><code data-trim>// call requestMIDIAccess
navigator.requestMIDIAccess({ sysex: false }).then(onMIDISuccess, onMIDIFailure);

// on success of MIDI device recognised
function onMIDISuccess(midiControl) {
  var MIDI = midiControl;

  // log each input data
  MIDI.inputs.forEach(function (input) {
    console.log(input.onmidimessage.data)
  }
}
          </code></pre>
          <p>So far only Chrome & Opera</p>
          <aside class="notes">
            <p>You make sure it’s avail, listen for attached device, when plugged in you can receive these afore mentioned messages. All I’m doing here is logging those messages - you can do whatever you want with them. Notice the sysex false - this is related to system messages and I will get back to that in a moment.</p>
            <p>Now there’s a window of opportunity - there’s plenty of stuff we can start coding with that!</p>
            <p>But what are these values?</p>
          </aside>
        </section>

        <section>
          <h2>What about sound?</h2>
          <p class="fragment fade-in">Mode messages: modulation, volume, panning, sustain, all sounds off, all notes, off, reset controllers.</p>
          <p class="fragment fade-in">Voice Bank</p>
          <aside class="notes">
            <p>We've already seen which note, but channel mode messages carry information about modulation, volume, panning, sustain - as well as things like all sounds off, all notes off, reset controllers etc...</p>
            <p>It also includes voice bank selection - the spec defines a whole range on instruments in it's voice bank</p>
          </aside>
        </section>

        <section data-state="play-keyboard">
          <h2>Web Audio API</h2>
          <p class="fragment fade-in">The classic companion to the Web MIDI API</p>
          <p class="fragment fade-in">MIDI data -> Play sounds</p>
          <aside class="notes">
            <p>So the web audio API - the classic companion to the Web MIDI API. You have an instrument or controller and you set up the Web Audio API to play sounds when certain data is received.</p>
            <p>I'm sure we've all seen the web audio API - here I'm using a sample</p>
          </aside>
        </section>

        <section data-state="play-keyboard">
          <h2>Pre load sounds</h2>
          <p class="fragment fade-in">Trigger</p>
          
          <aside class="notes">
            
          </aside>
        </section>


        <section>
          <h2>Create sounds</h2>
          <pre><code data-trim>const AUDIO_CONTEXT = new (window.AudioContext || window.webkitAudioContext)()
class Note {
  constructor(note, velocity) {
    this.NOTE = note * 10
    this.VELOCITY = velocity / 127
    
    this.OSC  = AUDIO_CONTEXT.createOscillator()
    this.GAIN = AUDIO_CONTEXT.createGain()
    
    this.OSC.connect(this.GAIN)
    this.GAIN.connect(AUDIO_CONTEXT.destination)
    
    console.log('NOTE %s @ %s', this.NOTE, this.VELOCITY)
    
    this.GAIN.gain.value = this.VELOCITY
    
    this.OSC.type = 'square'
    this.OSC.frequency.value = this.NOTE
  }
          </code></pre>
          <aside class="notes">
            <p>Here I'm pre loading all the piano samples and holding them in the buffer array, ready to be played when I receive the matched MIDI data</p>
            <p>We could of course generate sounds with the ocillator node, we could add filters when dials are turned on MIDI controllers.</p>
            <p>There's a whole range of audio/MIDI stuff - the best examples are 
          </aside>
        </section>


        <section data-state="playVid">
          <video src="public/media/akai.mp4" controls id="akai"></video>
          <aside class="notes">
            <p>So what I've done with this, is allocate occilated sounds, created with the audio api, to the synth pads on the controller. So I press them and I make sounds. They're pressure sensitive, so the harder I press the louder the sounds.</p>
            <p>I've also allocated some distortion to the dials, so when I play the sounds I can alter them</p>
            <p>I'm not an amazing musician - I can hold a beat, but I'm not amazing, I could use some help</p>
            <p>The other thing I was considering was does MIDI have to be hardware, considering it's just a data protocol, can we emulate that with software.</p>
          </aside>
        </section>

        <!-- <section>
          <h2>Back to our keyboard</h2>
          <aside class="notes">
            <p>So back to our keyboard</p>
          </aside>
        </section>

        <section data-state="play-keyboard">
          <h2>MIDI Voice Bank (Instruments)</h2>
          <p class="fragment fade-in">000 Grand Piano</p>
          <aside class="notes">
            <p>There's a whole range of voices - or sounds, for instance 000 is Grand Piano.</p>
            <p>But it's up to the manufacturer of the instrument to decide how it sounds. The voice bank sounds are mostly instrumental covering percussion, strings, wind instruments etc... there are a few special ones like 389 seashore, 390 bird and 391 telephone...</p>
            <p>So like this sound is not part of the Web MIDI Spec - for that we need the Web Audio API...</p>
          </aside>
        </section> -->

        <section>
          <h2>Audio/MIDI Examples</h2>
          <p><a href="http://codepen.io/davemackintosh/pen/XmrqLV?editors=0010">codepen.io/davemackintosh/pen/XmrqLV -> Oscillated MIDI triggered sounds - Dave Mackintosh</a></p>
          <p class="fragment fade-in"><a href="http://webaudiodemos.appspot.com/">webaudiodemos.appspot.com -> Cool demos</a></p>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h2>Timing Is Important</h2>
          <p>System Common Messages and System Real-time Messages</p>
          <p>MIDI Clock</p>
          pic of tape player - recording rewinding etc...
          <aside class="notes">
            <p>System Common Messages and System Real-time Messages deal with song selection, song position, the MIDI clock, start, stop, continue messages.</p>
            <p>And what about starting, stopping, continuing - this timing - this is important in MIDI. MIDI has it's own Time Code as part of the spec. The recording and playback equipment - we’ve only really delay with sound and instrument messages - this is all really still important.</p>
          </aside>
        </section>

        <section>
          <h2>Let Me Illustrate</h2>
          <p>Keyboards at the ready!</p>
          <aside class="notes">
            <p>Let me illustrate something to you. We’ve seen data as collected when we use MIDI, but we can also send data - so I can send data to all your MIDI devices.</p>
            <p>Remember our voice bank - number 391 telephone.</p>
            <p>Now you noticed that - that latency - that’s the web right. I could have thought about setting them all off at a global time - but that depends on your devices all being set to the same global time.</p>
          </aside>
        </section>

        <section data-state="play-ringtone"><h2>Ring!</h2></section>

        <section>
          <h2>Timing Model Object API (Draft)</h2>
          <img class="plain" src="public/media/timing.png" />
          <p><a href="http://webtiming.github.io/timingobject/">webtiming.github.io/timingobject/</a></p>
          <aside class="notes">
            <p>So I read something a draft spec from W3C the other day. The Timing Model Object API.</p>
          </aside>
        </section>

        <section>
          <blockquote>provide a unifying API for timed operation and temporal control</blockquote>
          <blockquote>encapsulate complexity of distributed time synchronization</blockquote>
          <aside class="notes">
            <p>‘QUOTE’</p>
            <p>This doesn’t just cover timing in MIDI, this covers timing within the browser ecosystem. Audio, video, animation, real time stuff with web sockets we’re doing now.</p>
          </aside>
        </section>

        <section>
          <h2>Machine Control Spec</h2>
          <blockquote>MIDI systems to communicate with and control … audio recording and production systems</blockquote>
          <aside class="notes">
            <p>Something else that’s pertinent in MIDI (as well as timing) is this recording business. There are lots of other specifications in MIDI. One of them is the Machine Control Spec. This came about to allow “MIDI systems to communicate with and control … audio recording and production systems”. Messages protocols include simple play, pause, stop, record to more complex time code based recorders and sequencers.</p>
          </aside>
        </section>

        <section>
          <h2>MediaRecorder API</h2>
          <p>Chrome 49 stable and Firefox 25+</p>
          <aside class="notes">
            <p>We’ve just seen the MediaRecording API come into Chrome 49 stable and Firefox 25+. Thankfully I don’t need to go into it in detail  - I don’t have enough time. Soledad - supersede - is talking about this. We have a Web API to cover this, it can be separated out from the Web MIDI spec.</p>
            <p>The Web MIDI API is design as such so it is kept low level and not in anyway complicated - there’s really good reasons for this. There’s a billion bits of MIDI hardware out there, to start adding more ‘features’ could complicate matters - at the moment, you can plug in anything midi enabled and although you might start receiving different values, you’re good to go.</p>
          </aside>
        </section>

        <section>
          <h2>Timeout</h2>
          <aside class="notes">
            <p>Let's have a little spec break and take a look at some MIDI enabled hardware shall we?</p>
          </aside>
        </section>

        <section data-background="public/media/midiConts.jpg">
          <aside class="notes">
            <p>These are just some examples of MIDI instruments.</p>
            <p>Top: Keyboard, synth, drum kit - also drum machines. You can also get things like guitar pedals, clarinet/sax type thing.</p>
            <p><b>One thing to bear in mind</b> MIDI used to be expensive - the digitals intruments & controllers themselves ran into the hundreds if not thousands of pounds and DIN connectors were the data connectors of choice. This dictated in the computer world - expensive sound cards.</p>
            <p>Bottom: Examples of basic controller. Launchpad (one first USB) - next two similar price AKAI LPD8 & Korg NanoPad2. Last icon iDJ</p>
            <p>You can see why there's the MMA, making sure all the different manufacturers stay in line with the protocol</p>
          </aside>
        </section>

        <section>
          <h2>Affordable Hardware</h2>
          <p></p>
          <aside class="notes">
            <p>So it's these controllers that have really got attention. We're talking affordable hardware, accessible easily from the browser with a really nice data protocol - which we've already seen</p>
            <p>So what else can we do?</p>
          </aside>
        </section>

        <section>
          <h2>MIDI Show Control Spec</h2>
          <blockquote>communicate with and to ... equipment in theatrical, live performance, multi-media, audio-visual and similar environments.</blockquote>
          <aside class="notes">
            <p>Well there’s the Show Control - this is lighting, fireworks, foundations - outside hotels in las vegas. This has really been superseded by DMX for the most part and some other things pyrotechnics use, so we can mostly by pass it.</p>
            <p>However visuals are a very interesting thing...</p>
          </aside>
        </section>

        <section>
          <h2>MIDI Visual Control Spec</h2>
          <blockquote>specification defines a way for MIDI to be used for control of visual presentation devices or systems</blockquote>
          <blockquote>MIDI Visual Control makes it possible to create visual effects that are synchronized with a musical performance.</blockquote>
          <p></p>
          <aside class="notes">
            <p>I'm just gonna read stright from the spec for this one</p>
            <p>This specification defines a way for MIDI to be used for control of visual presentation devices or systems. MIDI has expanded far beyond its original intention of being a control language for musical instruments. The robust nature of MIDI and wide support makes MIDI a suitable control system for visual performance or presentation devices.</p>
            <p>Furthermore, video has become a common component of musical performances in many venues. It makes sense to use MIDI as a way to tie musical performance to visual performance.</p>
            <p>When performing on a MIDI Visual Control compatible MIDI musical instrument, not only can sound be controlled, but images can be controlled as well. As a result, MIDI Visual Control makes it possible to create visual effects that are synchronized with a musical performance.</p>
          </aside>
        </section>

        <section>
          <h2>So let's do that!</h2>
          <p>Keyboards at the ready!</p>
          <aside class="notes">
            <p>So I'm going to change your MIDI device</p>
            <p>Keyboards are great but I really love the idea of crowdsourcing a realy big MIDI controller, by everyone having a small part of it.</p>
            <p>Let's go with a mini launchpad.</p>
            <p>But before I do I had this idea about playing with the raw data</p>
          </aside>
        </section>

        <section data-state="show-launchpad">
          <h2>(144, 60, 100)</h2>
          <aside class="notes">
            <p>This is the sort of data we pass right?</p>
            <p>When it comes to visuals tho - what does that look like.</p>
          </aside>
        </section>

        <section data-state="build-wall">
          <h2>Mini Launchpad</h2>
          <aside class="notes">
            <p>So I'm going to change your MIDI device</p>
            <p>Keyboards are great, but it'd be nice to play with a controller for this one, as it's probably more suitable - let's go with a mini launchpad.</p>
          </aside>
        </section>

        <section data-state="visual-demo"></section>

        <section data-state="back-to-talk">
          <h2>How did we do that</h2>
          <p class="fragment fade-in">Web MIDI</p>
          <p class="fragment fade-in">Web Audio</p>
          <p class="fragment fade-in">Web Animation API</p>
          <aside class="notes">
            <p>Now things are getting exciting. For every MIDI spec that's been thought of it appears we have a Web spec equivilent</p>
          </aside>
        </section>

        <section>
          <h2>Web Animation API</h2>
          <pre><code data-trim>launchpad.animate([
  {opacity: '1'},
  {opacity: '0.4'}
], {
    duration: 200,
    iterations: 1
});</code></pre>
          <aside class="notes">
            <p>Animation API - covers css transistions animations and svg. It comes with both the animatable keyframes part of css animations but also a timing layer. Much more control over event snad timelines - something css animations lacked.</p>
          </aside>
        </section>

        <section data-state="back-to-talk">
          <h2>MIDI Transport Specifications</h2>
          <p class="fragment fade-in">Originally 5-pin din cable</p>
          <p class="fragment fade-in">Today many different transports: USB</p>
          <aside class="notes">
            <p>Which brings us back to connector spec which I mention right at the top of the talk</p>
            <p>This is something the web uniquely gives us - the MIDI transport spec was DIN cables originially. It has been expended to cover other transport mechanisms - USB being the most common.</p>
          </aside>
        </section>

        <section>
          <h2>Bluetooth LE MIDI Spec</h2>
          <p class="fragment fade-in">Encoding and decoding MIDI data for transmission over BLE</p>
          <aside class="notes">
            <p>There's also the Bluetooth Low Enegery (BLE) spec - which is for encoding and decoding midi data over ble. There's a lot of MIDI enabled hardware coming out right now which is bluetooth enabled</p>
            <p>Which is great because we have...</p>
          </aside>
        </section>

        <section>
          <h2>Web Bluetooth API</h2>
          <p class="fragment fade-in">Under a flag in Chrome</p>
          <p class="fragment fade-in"><code>navigator.bluetooth.requestDevice(options)</code></p>
          <p class="fragment fade-in">Find out more: <a href="https://developers.google.com/web/updates/2015/07/interact-with-ble-devices-on-the-web">developers.google.com/web/updates/2015/07/interact-with-ble-devices-on-the-web</a></p>
          <aside class="notes">
          </aside>
        </section>

        <section>
          <h2>What possible uses?</h2>
          <aside class="notes">
            <p>What possible uses could you have for these things I've just covered. I mean we build software.</p>
          </aside>
        </section>

        <section>
          <h2>Madeon's Adventure Machine</h2>
          <img class="plain" src="public/media/madeons.png" />
          <p><a href="http://www.madeon.fr/adventuremachine/">madeon.fr/adventuremachine/</a></p>
          <aside class="notes">
            <p>This is a website some of my dear friends at we make awesome sh* built ofr musician Madeon. It's a sort of online synthesiser/sampler. It works without a MIDI controller, but if you have a launchpad, you can plug it in and use it it's compatible - and a lot of fun.</p>
          </aside>
        </section>

        <section>
          <h2>Navigating Web Pages</h2>
          <p class="fragment fade-in">Accessibility</p>
          <aside class="notes">
            <p>What about simply navigating web pages - either as a fun way, or a better way. Keyboards are great, but we never questioned them.</p>
          </aside>
        </section>

        <section>
          <h2>Dinosaurs</h2>
          <img class="plain" src="public/media/trex.png" />
          <p><a href="http://www.blackgangchine.com/">blackgangchine.com/</a></p>
          <aside class="notes">
            <p>I did a short version of this talk at a local evening event a couple of months ago, and another friend was talking before me about how he had helped on a project hacking big mechanical dinosaurs. Sounds crazy right.</p>
            <p>We have this island of the south coast of England and there’s a park there, where the owner has just shipped in these huge dinosaurs. They all have mechanical skeletons which are control by raspberry pis. These in turn can be programmed with javascript. And so we were thinking of ways for these huge dinosaurs to be more crowd interactive. Having a motion or infrared sensor so they turn when they detect walking past…</p>
          </aside>
        </section>

        <section>
          <h2>Dinosaurs</h2>
          <img class="plain" src="public/media/smalldino.png" />
          <p><a href="http://www.blackgangchine.com/">blackgangchine.com/</a></p>
          <aside class="notes">
            <p>But what if the public could control the dinosaurs?</p>
            <p>Hook up some cheap MIDI controllers and let the kids and big kids come and move the smaller dinos with them</p>
          </aside>
        </section>

        <section>
          <h2>Control Your Home</h2>
          <img class="plain" src="public/media/drumpad.png" />
          <aside class="notes">
            <p>Out homes are getting more and more connected these days - lights, themostats. Imagine one of these (drum pads) on the wall controlling all those things in your house.</p>
          </aside>
        </section>

        <section>
          <h2>Take it to the streets!</h2>
          <img class="plain" src="public/media/me.jpg" />
          <p><a href="https://24ways.org/2015/bringing-your-code-to-the-streets">24ways.org/2015/bringing-your-code-to-the-streets</a></p>
          <aside class="notes">
            <p>You can build a portable VJ kit and carry around the streets of your city, with a laptop, projector and MIDI controller, mixing visuals via your browser.</p>
            <p>I did this - this is me at christmas, walking around the streets of my city, projecting moving visuals to music - with an attached tray. Read all about it on 24ways.org</p>
          </aside>
        </section>

        <section>
          <h2>Talking about MIDI?</h2>
          <aside class="notes">
            <p>I was talking about MIDI and I hope I taught you something about MIDI - but secretly I was talking to you about specifications. How they’re important - how a something that’s been around for 30 years is still going strong and is still relevant - much like what we do with our web work. Just get a bunch of enthusiastic, clever, people together and you *will* create something that evolves to start including things you would never think of. Maing it all the more substantial and long lasting.</p>
          </aside>
        </section>

        <section>
          <h2>The MIDI world is your browser...</h2>
          <h3>Javascript is Everywhere!</h3>
          <div class="fragment fade-in">
            <p>Thanks!</p>
            <p>@rumyra</p>
            <p>I'll tweet the slides</p>
          </div>
          <aside class="notes">
            <p>We're so comfortable now with our whole dev stack being JS - but it's not just a software environment anymore.</p>
            <p>Tim and I will be around for the next two days with all of our equipment VJing so come and say hello, come and play with our MIDI hardware - can I say that. It’s been an absolute pleasure I really hope I have inspired you today. Thank you.</p>
          </aside>
        </section>

<!-- THIS IS IMPORTANT "0x" + x.toString(16); -->

        

        <!-- Piano sounds courtesy of University of Iowa http://theremin.music.uiowa.edu/MISpiano.html-->

      </section>
    </div></div>

    <div id="vjing">
      <button id="play-audio">play</button>
      <audio id="simon" src="public/media/Guilt.mp3" loop></audio>
      <section id="screen"></section>
    </div>

<div id="pusher" data-key="{{PUSH_KEY}}"></div>
<script src="reveal/plugin/notes/notes.js"></script>
<script src="reveal/plugin/highlight/highlight.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- <script src="audioVisual.js"></script> -->
<!-- <script src="demos.js"></script> -->

<script type="text/javascript">
// establish connection with pusher
  var config = document.getElementById('pusher').dataset;
  var pusher = new Pusher(config.key, {encrypted:true});

  Pusher.channel_auth_endpoint = 'http://localhost:3000/pusher/auth';
  pusher.connection.bind('state_change', function(states) {
      console.log("Pusher's current state is " + states.current);
  });

  // subscribe to channel
  var channel = pusher.subscribe('private-midi_channel');

  channel.bind('pusher:subscription_succeeded', function() {
    console.log('subscription succeeded');
});
// Reveal~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Reveal.initialize({

  // Display controls in the bottom right corner
  controls: true,

  // Display a presentation progress bar
  progress: false,

  // Display the page number of the current slide
  slideNumber: true,

  // Push each slide change to the browser history
  history: true,

  // Enable keyboard shortcuts for navigation
  keyboard: true,

  // Transition style
  transition: 'fade', // none/fade/slide/convex/concave/zoom

  // Transition speed
  transitionSpeed: 'default', // default/fast/slow

  // Transition style for full page slide backgrounds
  backgroundTransition: 'default', // none/fade/slide/convex/concave/zoom

  // Number of slides away from the current that are visible
  viewDistance: 2,

  // Parallax background image
  parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

  // Parallax background size
  parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"

  // Amount to move parallax background (horizontal and vertical) on slide change
  // Number, e.g. 100
  parallaxBackgroundHorizontal: '',
  parallaxBackgroundVertical: ''

});

var vjDiv = document.getElementById('vjing'),
    vjScreen = document.getElementById('screen');
// send right view to audience
Reveal.addEventListener( 'play-keyboard', function() {
    channel.trigger(
      'client-play_keyboard',
      {
        "sendSome": 'data'
      }
    );
  }, false);
Reveal.addEventListener( 'playVid', function() {
    document.getElementById('akai').play();
  }, false );

Reveal.addEventListener( 'play-ringtone', function() {
    channel.trigger(
      'client-play_ringtone',
      {
        "sendSome": 'data'
      }
    );
  }, false);

Reveal.addEventListener( 'show-launchpad', function() {
    channel.trigger(
      'client-show_launchpad',
      {
        "sendSome": 'data'
      }
    );
  }, false);
Reveal.addEventListener( 'build-wall', function() {
    buildLaunchpadWall();
  }, false );
Reveal.addEventListener( 'visual-demo', function() {
    vjDiv.style.display = 'block';
  }, false );

Reveal.addEventListener('back-to-talk', function() {
    vjDiv.style.display = 'none';
  }, false );

// when client joins add to array
var allUsers = [], allIds = [];
channel.bind('client-register_user', function(data) {
  if (!include(allIds, data.userId)) {
    allUsers.push({'userid': data.userId, 'colour': data.bkgrndColour});
    allIds.push(data.userId);
  }
})
channel.bind('client-send_square', function(data) {
  changeWall(data.userId, data.color, data.square, data.on);
})

function buildLaunchpadWall() {
  var allPads = '';
  for (i=0; i<allUsers.length; i++) {
    allPads += '<div id="'+allUsers[i].userid+'" class="visual"><em></em><em></em><em></em><em></em></div>';
  }
  vjScreen.innerHTML = allPads;
}
function changeWall(id, color, number, on) {
  var square = document.getElementById(id).children[number]
  if (on) {
    square.style.backgroundColor = 'transparent';
  } else {
    square.style.backgroundColor = color;
  }
}

var playButton = document.getElementById('play-audio'),
    simonSoundEl = document.getElementById('simon'),
    audioAPI = new AudioContext,
    guiltMp3 = audioAPI.createMediaElementSource(simonSoundEl),
    analyserNode = audioAPI.createAnalyser(),
    frequencyData = new Uint8Array(1024);
analyserNode.fftSize = 2048;

var playGuilt = function playGuilt() {
  guiltMp3.connect(analyserNode);
  guiltMp3.connect(audioAPI.destination);
  analyserNode.connect(audioAPI.destination);
  simonSoundEl.play();
  flashPads();
}
playButton.onclick = function() {
  if (simonSoundEl.paused) {
    playGuilt();
  } else {
    simonSoundEl.pause();
  }
}
var flashPads = function flashPads() {
  requestAnimationFrame(flashPads);
  //constantly getting feedback from data
  analyserNode.getByteFrequencyData(frequencyData);

  var padEls = vjDiv.getElementsByClassName('visual');
  var totalElements = padEls.length;

  for (var i=0; i<totalElements; i++) {
    //flash on frequency
    var freqDataKey = i*8;
    if (frequencyData[freqDataKey] > 140){
      //start animation on element
      padEls[i].style.opacity = "1";
    } else {
      padEls[i].style.opacity = "0.4";
    }
  }
}

function include(arr,obj) {
    return (arr.indexOf(obj) != -1);
  }


</script>


</body>
</html>